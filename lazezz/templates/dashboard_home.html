<!doctype html>
<html lang="en">
    {% load static %}
    {% load mathfilter %}
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>{{user.oname}} : Dashboard</title>
    <link rel="icon" type="image/x-icon" href="{% static 'images/dashboard.png' %}">
    <link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Arimo:wght@500&family=Castoro+Titling&family=Montserrat:wght@500&family=Pattaya&display=swap" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous">
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons&family=Material+Icons+Outlined"
      rel="stylesheet">
      <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
      <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@48,400,0,0" />
      <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
   </head>
   <style>
    *{
      box-sizing:border-box;
    }
    .nav-pills{
        --bs-nav-pills-link-active-bg:orangered;
        --bs-nav-pills-border-radius:0;
    }
    .nav-link{
        color:orangered;
        border-radius:0;
        font-family:'Montserrat';
        font-size:18px;
    }
    .additem{
      background:linear-gradient(rgb(253, 97, 40), orangered);
      color:white;
      font-family:'Montserrat';
      font-size:20px;
      border:1px solid orangered;
      border-radius:30px;
      width:50%;
      margin-top:5px;
      margin-bottom:5px;
      padding-top:10px;
    }
    .additem:hover{
      background:white;
      color:orangered;
      border:1px solid orangered;
    }
    #lazezzdashboard{
      font-size:40px;
    }
    @media (max-width:700px){
      #lazezzdashboard{
        font-size:20px;
      }
    }
   </style>
    <body>
      <nav class="container-fluid mx-0 p-0 navbar navbar-expand-lg">
        <!-- <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#topBar" aria-controls="navbarTogglerDemo01" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button> -->
        <div class="row container-fluid p-0 mx-auto" id="topBar" style="border-bottom:2px solid orangered;">
            <div class="icon col-md-3 col-sm-3 col-3">
                <img src="{% static 'images\myLogo.png' %}" class="img-fluid w-xs-5" alt="Logo" width="80px" onclick="window.open('/login_rest')">
            </div>
            <div class="mid-text col-md-5 col-sm-4 col-4" style = 'padding-top:11px;'>
                <h1 class="text-center" id="lazezzdashboard"><span style="font-family:'Pattaya'">Lazezz</span> Dashboard</h1>
            </div>
            <!-- <div class="user_display col-md-3" style="padding:20px 2px 0px 2px;">
                <h4>Welcome, {{user.oname}}</h4>
            </div> -->
            <div class="dropdown dropstart col-md-4 col-lg-3 col-sm-3 col-3" style="padding:20px 1px 0px 1px;">
              <button class="btn dropdown-toggle fs-4 d-lg-none" type="button" data-bs-toggle="dropdown" aria-expanded="false">
                <span class="material-symbols-outlined">
                  account_circle
                  </span>
              </button>
              <button class="btn dropdown-toggle fs-4 d-none d-lg-block" type="button" data-bs-toggle="dropdown" aria-expanded="false" style="font-family:'Pattaya'; font-size:20px;">
                Welcome, {{user.oname}}
              </button>
              <ul class="dropdown-menu">
                <li>
                  <a class="dropdown-item d-lg-none">Welcome {{user.oname}}</a>
                </li>
                <li><a class="dropdown-item d-flex" href="{% url 'Update Your Profile' %}"><span class="material-symbols-outlined">
                  update
                  </span> Update Profile</a></li>
                <li><a class="dropdown-item d-flex " href="{% url 'Logout from dashboard' %}"><span class="material-symbols-outlined">logout</span> Logout</a></li>
              </ul>
            </div>
            <div class="col-lg-1 pt-3 pb-3 d-none d-lg-block">
                <a href="{% url 'Logout from dashboard' %}" class="btn btn-outline-danger d-none d-lg-block" style="font-family:'Montserrat'; font-weight: bold;">Logout</a>
            </div>
          </div></nav>
        
        <!-- Adding Tabs for options -->
        <div class="container-fluid p-0 d-flex align-items-start h-100">
          <!-- <button class="btn btn-danger d-lg-none" type="button" data-bs-toggle="offcanvas" data-bs-target="#v-pills-tab" aria-controls="offcanvasScrolling">-></button> -->

            <div class="nav flex-column nav-pills h-100 " id="v-pills-tab" role="tablist" aria-orientation="vertical" data-bs-scroll="true" data-bs-backdrop="false" tabindex="-1">
              <!-- <div class="container-fluid row d-lg">
                <h4 class="offcanvas-title col-md-10" id="offcanvasScrollingLabel" style="font-family:'Montserrat'">Option Panel</h4>
              <button type="button" class="btn-close col-md-2" data-bs-dismiss="offcanvas" aria-label="Close"></button>
              </div> -->
              <button class="nav-link active d-flex justify-content-center p-2" id="v-pills-home-tab" data-bs-toggle="pill" data-bs-target="#v-pills-home" type="button" role="tab" aria-controls="v-pills-home" aria-selected="true"><span class="material-symbols-outlined">home</span> <span class="d-none d-lg-block">Home</span></button>
              <button class="nav-link d-flex justify-content-center p-2" id="v-pills-profile-tab" data-bs-toggle="pill" data-bs-target="#v-pills-profile" type="button" role="tab" aria-controls="v-pills-profile" aria-selected="false"><span class="material-symbols-outlined">person</span> <span class="d-none d-lg-block">Profile</span></button>
              <!-- <button class="nav-link" id="v-pills-disabled-tab" data-bs-toggle="pill" data-bs-target="#v-pills-disabled" type="button" role="tab" aria-controls="v-pills-disabled" aria-selected="false" disabled>Disabled</button> -->
              <button class="nav-link d-flex justify-content-center p-2" id="v-pills-messages-tab" data-bs-toggle="pill" data-bs-target="#v-pills-messages" type="button" role="tab" aria-controls="v-pills-messages" aria-selected="false"><span class="material-symbols-outlined">restaurant_menu</span> <span class="d-none d-lg-block">Products</span></button>
              <button class="nav-link d-flex justify-content-center p-2" id="v-pills-orders-tab" data-bs-toggle="pill" data-bs-target="#v-pills-orders" type="button" role="tab" aria-controls="v-pills-orders" aria-selected="false"><span class="material-symbols-outlined">
                storefront
                </span> <span class="d-none d-lg-block">Orders</span></button>
              <button class="nav-link d-flex justify-content-center p-2" id="v-pills-history-tab" data-bs-toggle="pill" data-bs-target="#v-pills-history" type="button" role="tab" aria-controls="v-pills-settings" aria-selected="false"><span class="material-symbols-outlined">
                history
                </span> <span class="d-none d-lg-block">History</span></button>
            </div>
            <div class="container tab-content md-auto" style="color:rgb(100, 99, 99);" id="v-pills-tabContent">
              <div class="tab-pane fade show active" id="v-pills-home" role="tabpanel" aria-labelledby="v-pills-home-tab" tabindex="0">
                <div class="row mt-2 overflow-auto">
                  <div class="col-md-8 col-sm-6 col-xs-6 shadow border rounded"><img src="{% static 'images/' %}top_product{{user.sid}}.png" class="img-fluid w-md-30 w-sm-30 w-xs-30" alt="product stats"></div>
                  <div class="col-md-4 p-3 col">
                    <div class="box shadow rounded row-md-4 row-sm-3 row-xs-3 mb-2 border border-danger">
                      <div class="amt text-center text-danger" style="font-family:'Montserrat'; font-size:70px; font-weight:bolder;">&#8377; {{t_worth}}</div>
                      <div class="text-center text-dark" style="font-family:'Montserrat'; font-size:30px; font-weight:bold;">Net Income</div>
                    </div>
                    <div class="box shadow rounded row-md-4 mb-2 border border-danger">
                      <div class="amt text-center text-success" style="font-family:'Montserrat'; font-size:70px; font-weight:bolder;">{{t_fds}}</div>
                      <div class="text-center text-dark" style="font-family:'Montserrat'; font-size:30px; font-weight:bold;word-wrap: break-word;">Total Products Selling</div>
                    </div>
                    <div class="box shadow rounded row-md-4 mb-2 border border-danger">
                      <div class="amt text-center text-primary" style="font-family:'Montserrat'; font-size:70px; font-weight:bolder;">{{to}}</div>
                      <div class="text-center text-dark" style="font-family:'Montserrat'; font-size:30px; font-weight:bold;">Total Orders Got</div>
                    </div>
                  </div>
                </div>
                <div class="row mt-2 border shadow rounded">
                  <div class="col-md-6"><img src="{% static 'images/' %}year-month-stats{{user.sid}}.jpg" class="img-fluid w-md-30 w-sm-30 w-xs-30" width="550px" alt="Analysis"></div>
                  <div class="col-md-5"><img src="{% static 'images/' %}yearstats{{user.sid}}.jpg" class="img-fluid w-md-30 w-sm-30 w-xs-30" width='550px' alt="Analysis"></div>
                </div>
                <div class="row mt-5 border shadow rounded mb-2 pb-2">
                  <div class="col-md-6"><img src="{% static 'images/' %}order_stats{{user.sid}}.jpg" class="img-fluid w-md-30 w-sm-30 w-xs-30" width = "550px" alt="Orders stats"></div>
                  <div class="col-md-5">
                    <h1 class="mt-2 text-center" style="font-family:'Pattaya'; color:orangered;">---Your Top 3 Customers---</h1>
                    {% for three in top_three %}
                    <div class="box row rounded border border-danger p-3 mt-4 text-dark">
                      <div class="col-md-2"><img src="{{three.cimg.url}}" class="img-fluid rounded-circle" width='50px' alt="{{three.name}}"></div>
                      <div class="col-md-10">
                        <div class="customer_name" style="font-family:'Pattaya'; font-size:30px;">{{three.name}}</div>
                      <div class="customer_mobile"style="font-family:'Montserrat'; font-size:20px;">{{three.phone}}</div>
                    </div>
                    </div>
                    {% endfor %}
                  </div>
                </div>
              </div>
              <div class="tab-pane fade" id="v-pills-profile" role="tabpanel" aria-labelledby="v-pills-profile-tab" tabindex="0" style="margin:10px;">
                <div class="container-fluid row">
                    <div class="container-fluid col-md-8 d-flex justify-content-center">
                        <img src="{{user.rest_img.url}}" alt="Restaurant Image" class="img rounded shadow-lg" width="100%" height="100%">
                    </div>
                    <div class="container col-md-4 shadow-lg border rounded">
                        <h3 class="text-center pt-3" style="color:orangered; font-family:'Montserrat'; font-size:30px; border-bottom:2px solid orangered; font-weight:600;">Basic Details</h3>
                        <p class="text-left mt-3" style="font-family:'Montserrat'; font-size:18px; font-weight:600;"><span style="font-family:'Montserrat'; font-size:22px; font-weight:bold;display:block; color:red;">Owner Name</span>{{user.oname}}</p>
                    
                        <p class="text-left mt-2" style="font-family:'Montserrat'; font-size:18px; font-weight:600;"><span style="font-family:'Montserrat'; font-size:22px; font-weight:bold;display:block;color:red;">Restaurant Name</span>{{user.sname}}</p>

                        <p class="text-left mt-2" style="font-family:'Montserrat'; font-size:18px; font-weight:600;"><span style="font-family:'Montserrat'; font-size:22px; font-weight:bold;display:block;color:red;">Mobile Number</span>{{user.sphone}}</p>

                        <p class="text-left mt-2" style="font-family:'Montserrat'; font-size:18px; font-weight:600;"><span style="font-family:'Montserrat'; font-size:22px; font-weight:bold;display:block;color:red;">Restaurant Address</span>{{user.sadd}}</p>
                        <p class="text-left mt-2" style="font-family:'Montserrat'; font-size:18px; font-weight:600;"><span style="font-family:'Montserrat'; font-size:22px; font-weight:bold;display:block;color:red;">City</span>{{user.city}}</p>
                        <p class="text-left mt-1" style="font-family:'Montserrat'; font-size:18px; font-weight:600;"><span style="font-family:'Montserrat'; font-size:22px; font-weight:bold;display:block;color:red;">Verification Status</span>
                            {% if user.verification == 1 %}
                                <span class="btn btn-success w-100">Verified</span>
                            {% else %}
                                <span class="btn btn-danger w-100">Pending</span>
                            {% endif %}
                        </p>
                        
                    </div>
                </div>
                <div class="container-fluid mt-5 row">
                    <div class="container col-md-5 shadow border rounded">
                        <h3 class="text-center pt-4" style="color:orangered; font-family:'Montserrat'; font-size:30px; border-bottom:2px solid orangered; font-weight:600;">Restaurant Documents</h3>
                        <p class="text-left mt-4" style="font-family:'Montserrat'; font-size:20px; font-weight:600;"><span style="font-family:'Montserrat'; font-size:25px; font-weight:bold;display:block; color:red;">Aadhaar</span>{{user.aadhaar}}</p>
                    
                        <p class="text-left mt-2" style="font-family:'Montserrat'; font-size:20px; font-weight:600;"><span style="font-family:'Montserrat'; font-size:25px; font-weight:bold;display:block;color:red;">PAN</span>{{user.pan}}</p>

                        <p class="text-left mt-2" style="font-family:'Montserrat'; font-size:20px; font-weight:600;"><span style="font-family:'Montserrat'; font-size:25px; font-weight:bold;display:block;color:red;">GSTIN</span>{{user.gstin}}</p>

                        <p class="text-left mt-2" style="font-family:'Montserrat'; font-size:20px; font-weight:600;"><span style="font-family:'Montserrat'; font-size:25px; font-weight:bold;display:block;color:red;">FSSAI Number</span>{{user.fssai_no}}</p>
                    </div>
                    <div class="container col-md-6 shadow border rounded">
                        <h3 class="text-center pt-4" style="color:orangered; font-family:'Montserrat'; font-size:30px; border-bottom:2px solid orangered; font-weight:600;">Additional Details</h3>

                        <p class="text-left mt-4" style="font-family:'Montserrat'; font-size:20px; font-weight:600;"><span style="font-family:'Montserrat'; font-size:25px; font-weight:bold;display:block; color:red;">Bank Account Number</span>{{user.baccno}}</p>
                    
                        <p class="text-left mt-2" style="font-family:'Montserrat'; font-size:20px; font-weight:600;"><span style="font-family:'Montserrat'; font-size:25px; font-weight:bold;display:block;color:red;">IFSC Code</span>{{user.ifsc}}</p>

                        <p class="text-left mt-2" style="font-family:'Montserrat'; font-size:20px; font-weight:600;"><span style="font-family:'Montserrat'; font-size:25px; font-weight:bold;display:block;color:red;">Taking Orders Online</span>
                            {%if user.o_active == 1 %}
                                <span class="text-success" style="font-family:'Montserrat'; font-size:25px; font-weight:bold;">Yes</span>
                            {%else%}
                            <div class="row">
                              <span class="text-danger col-md-6" style="font-family:'Montserrat'; font-size:25px; font-weight:bold;">No</span>
                              <a href = 'accept_orders_online?sid={{user.sid}}' class="btn btn-primary col-md-5">Start Taking Orders</a></div>
                            {% endif %}
                        </p>
                        <p class="text-left mt-2" style="font-family:'Montserrat'; font-size:20px; font-weight:600;"><span style="font-family:'Montserrat'; font-size:25px; font-weight:bold;display:block;color:red;">Table Orders Online</span>
                            {%if user.t_active == 1 %}
                                <span class="text-success" style="font-family:'Montserrat'; font-size:25px; font-weight:bold;">Yes</span>
                            {%else%}
                            <div class="row">
                                <span class="text-danger col-md-6" style="font-family:'Montserrat'; font-size:25px; font-weight:bold;">No</span>
                              </div>  
                            {% endif %}
                        </p>

                    </div>
                </div>
              </div>
              <!-- <div class="tab-pane fade" id="v-pills-disabled" role="tabpanel" aria-labelledby="v-pills-disabled-tab" tabindex="0">...</div> -->
              <div class="tab-pane fade" id="v-pills-messages" role="tabpanel" aria-labelledby="v-pills-messages-tab" tabindex="0">
                <div class="row">
                  <div class="col-md-7"><h1 class="mb-3">Your Food Items will display here</h1></div>
                  <div class="col-md-5 pe-0 me-0 d-flex justify-content-end"><a href="" class="btn additem d-flex justify-content-center" data-bs-toggle="modal" data-bs-target="#exampleModal1" onclick="addnew()">Add Item  <span class="material-symbols-outlined">add</span></a></div>
                </div>
                <div class="container-fluid">
                    <div class="row">
                        {{prod}}
                        {% for food in products %}
                        <div class="card col-md-3 m-3 p-0" style="width: 18rem;">
                            <img src="{{food.fimg.url}}" class="card-img-top" alt="food-image">
                            <div class="card-body">
                              <h5 class="card-title">{{food.fname}}</h5>
                              <p class="card-text"><span style="font-size:20px; font-weight:600;">Price : </span>{{food.price}}</p>
                              {% if food.avail != 1 %}
                                <p class="card-text text-danger"><span style="font-size:20px; font-weight:600;">Available : </span>No</p>
                               {% else %}
                               <p class="card-text text-success"><span style="font-size:20px; font-weight:600;">Available : </span>Yes</p>
                              {% endif %}
                              <div class="row">
                              <a href='#' class="btn btn-warning col-md-4" onclick="create('{{food.fname}}', parseInt('{{food.price}}'), parseInt('{{food.avail}}'), parseInt('{{food.fid}}'), parseInt('{{food.sid}}'))" data-bs-toggle="modal" data-bs-target="#exampleModal" >Update</a>
                              <a href="delete?fd={{food.fid}}&sd={{food.sid}}" class="btn btn-outline-danger col-md-7 mx-auto">Delete</a>
                            </div>
                              <script>
                                var sd = parseInt('{{food.sid}}')
                                  function create(fname, fprice, avail, fid, sid){
                                    console.log(avail);
                                    var d = document.getElementById('exampleModal');
                                    document.getElementById('title').innerText = fname;
                                    document.getElementById('fnm').value = fname;
                                    document.getElementById('fp').value = fprice;
                                    document.getElementById('fid').value = fid;
                                    document.getElementById('sid').value = sid;
                                    if(avail == 1){
                                        document.getElementById('avl').checked=true;
                                        document.getElementById('avl').value = 'yes'
                                    }else{
                                      document.getElementById('avl').value = 'no' 
                                      document.getElementById('avl').checked=false;                                     
                                    }
                                  }
                                  function cngvalue(){
                                    var a = document.getElementById('avl')
                                    if(a.checked == true){
                                      a.value='yes'
                                    }else{
                                      a.value='no'
                                    }
                                  }
                                  console.log(sd)
                                  function addnew(){
                                    document.getElementById('sid1').value=sd;
                                  }
                              </script>
                            </div>
                          </div>
                          {% endfor %}
                    </div>
                    <form action="update" method="POST">
                      {% csrf_token %}
                    <div class="modal" id="exampleModal" tabindex="-1">
                        <div class="modal-dialog">
                          <div class="modal-content">
                            <div class="modal-header">
                              <h5 class="modal-title text-dark text-center" id="title">{{food.fname}}</h5>
                              <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                            </div>
                            <div class="modal-body" id="body">
                              <span style="font-family:'Montserrat'; font-size:25px; font-weight:bold;display:block;color:red;">Product Name</span>
                              <input type="text" name="fname" id="fnm" class="form-control">
                              
                              <span style="font-family:'Montserrat'; font-size:25px; font-weight:bold;display:block;color:red;">Food ID</span>
                              <input type="text" name="fid" id="fid" readonly class="form-control">
                              
                              <span style="font-family:'Montserrat'; font-size:25px; font-weight:bold;display:block;color:red;">Restauarant ID</span>
                              <input type="text" name="sid" id="sid" readonly class="form-control">

                              <span style="font-family:'Montserrat'; font-size:25px; font-weight:bold;display:block;color:red;">Price</span>
                              <input type="text" name="fprice" id="fp" class="form-control">

                              <span style="font-family:'Montserrat'; font-size:25px; font-weight:bold;color:red; display:inline;">Available</span>
                              <input type="checkbox" name="availchk" id="avl" class='mt-2' onchange = 'cngvalue()' value = 'no' style="width:20px; height:20px; margin-left:50px;">
                            </div>
                            <div class="modal-footer">
                              <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                              <button type="submit" class="btn btn-outline-warning">Save changes</button>
                            </div>
                          </div>
                        </div>
                      </div>
                    </form>
                    <form action="add" method="POST" enctype="multipart/form-data">
                      {% csrf_token %}
                    <div class="modal" id="exampleModal1" tabindex="-1">
                        <div class="modal-dialog">
                          <div class="modal-content">
                            <div class="modal-header">
                              <h5 class="modal-title text-dark text-center" id="title">Add New Item</h5>
                              <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                            </div>
                            <div class="modal-body" id="body">
                              <span style="font-family:'Montserrat'; font-size:25px; font-weight:bold;display:block;color:red;">Product Name</span>
                              <input type="text" name="fname" id="fnm" class="form-control">

                              <span style="font-family:'Montserrat'; font-size:25px; font-weight:bold;display:block;color:red;">Restauarant ID</span>
                              <input type="text" name="sid" id="sid1" readonly class="form-control">

                              <span style="font-family:'Montserrat'; font-size:25px; font-weight:bold;display:block;color:red;">Price</span>
                              <input type="text" name="fprice" id="fp" class="form-control">

                              <span style="font-family:'Montserrat'; font-size:25px; font-weight:bold;color:red; display:inline;">Available</span>
                              <input type="checkbox" name="availchk1" id="avl" class='mt-2' onchange = 'cngvalue()' style="width:20px; height:20px; margin-left:50px;">
                              <br><span style="font-family:'Montserrat'; font-size:25px; font-weight:bold;color:red;">Food Image</span>
                              <input type="file" name="fmg" id="fmg" class="form-control">
                            </div>
                            <div class="modal-footer">
                              <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                              <button type="submit" class="btn btn-outline-warning">Save changes</button>
                            </div>
                          </div>
                        </div>
                      </div>
                    </form>
                </div>
              </div>
              <div class="tab-pane fade" id="v-pills-orders" role="tabpanel" aria-labelledby="v-pills-orders-tab" tabindex="0">
                
                <!-- Working on Orders -->
                <ul class="nav nav-underline" id="myTab" role="tablist">
                  <li class="nav-item" role="presentation">
                    <button class="nav-link active" id="home-tab" data-bs-toggle="tab" data-bs-target="#home-tab-pane" type="button" role="tab" aria-controls="home-tab-pane" aria-selected="true">Current</button>
                  </li>
                  <li class="nav-item" role="presentation">
                    <button class="nav-link" id="profile-tab" data-bs-toggle="tab" data-bs-target="#profile-tab-pane" type="button" role="tab" aria-controls="profile-tab-pane" aria-selected="false">Past</button>
                  </li>
                  <li class="nav-item" role="presentation">
                    <button class="nav-link" id="profile-tab" data-bs-toggle="tab" data-bs-target="#cstats-tab-pane" type="button" role="tab" aria-controls="history-tab-pane" aria-selected="false">Customer Stats</button>
                  </li>
                </ul>
                <div class="tab-content" id="myTabContent">
                  <div class="tab-pane fade show active" id="home-tab-pane" role="tabpanel" aria-labelledby="home-tab" tabindex="0">
                    <input type="button" value="Refresh" onclick="refreshOrders()">
                    {% for order in orders %}
                    {% if order.o_active == 1 %}
                    <div class="accordion accordion-flush mt-3" id="accordionFlushExample">
                      <div class="accordion-item border rounded"  style="--bs-border-color:orangered; padding:6px;">
                        <h2 class="accordion-header">
                          <button class="accordion-button collapsed row p-2 mx-auto" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseOne{{order.id}}" aria-expanded="false" aria-controls="flush-collapseOne">
                            <span class='col-md-4' style="font-family:'Montserrat'; font-size:30px; font-weight:bold;">{{order.name}}</span>
                            <span class='col-md-3' style="font-family:'Montserrat'; font-size:20px; font-weight:500;">{{order.date}}</span>
                            <span id="status{{order.id}}" class="bg-danger text-center text-white rounded p-2 col-md-2" style="font-family:'Montserrat'; font-size:20px;">Pending</span>
                          </button>
                        </h2>
                        <div id="flush-collapseOne{{order.id}}" class="accordion-collapse collapse" data-bs-parent="#accordionFlushExample">
                          <div class="accordion-body row">
                            {% for food in products %}
                              {% if food.fid == order.fid and food.sid == order.sid %}
                                <div class="col-md-6"><h3>Food Item : {{food.fname}}</h3>
                                <h4>Food Price : Rs {{food.price}}</h4>
                              </div>
                              <div class="col-md-2">
                                <h4>Quantity : {{order.quantity}}</h4>
                                <h5>Total : Rs {{order.quantity|mul:food.price}}</h5>
                              </div>
                                <a href="accept?od={{order.id}}&fd={{food.fid}}&sd={{order.sid}}&ph={{order.phone}}&quantity={{order.quantity}}" class="btn btn-success col-md-2 p-auto m-3" style="font-family:'Montserrat'; font-size:20px;" onclick="updateRec()">Accept</a>
                                <script>
                                  function updateRec(){
                                    var a  = document.getElementById('status{{order.id}}')
                                    a.setAttribute('class', 'bg-success text-center text-white rounded p-2 col-md-2');
                                    a.innerText = 'Accepted';
                                    a.disabled=true;
                                    // window.open('accept?fd={{orders.id}}&sd={{orders.sid}}');
                                  }
                                </script>
                                
                              {% endif %}
                            {% endfor %}
                          </div>
                        </div>
                      </div>
                    </div>
                    {% endif %}
                    {% endfor %}
                  </div>
                  <div class="tab-pane fade" id="profile-tab-pane" role="tabpanel" aria-labelledby="profile-tab" tabindex="0">
                    {% for order in orders %}
                    {% if order.o_active == 0 %}
                    <div class="accordion accordion-flush mt-3" id="accordionFlushExample">
                      <div class="accordion-item border rounded"  style="--bs-border-color:orangered; padding:6px;">
                        <h2 class="accordion-header">
                          <button class="accordion-button collapsed row p-2 mx-auto" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseOne{{order.id}}" aria-expanded="false" aria-controls="flush-collapseOne">
                            <span class='col-md-4' style="font-family:'Montserrat'; font-size:30px; font-weight:bold;">{{order.name}}</span>
                            <span class='col-md-3' style="font-family:'Montserrat'; font-size:20px; font-weight:500;">{{order.date}}</span>
                            <span id="status" class="bg-success text-center text-white rounded p-2 col-md-2" style="font-family:'Montserrat'; font-size:20px;">Delivered</span>
                          </button>
                        </h2>
                        <div id="flush-collapseOne{{order.id}}" class="accordion-collapse collapse" data-bs-parent="#accordionFlushExample">
                          <div class="accordion-body row">
                            {% for food in products %}
                              {% if food.fid == order.fid and food.sid == order.sid %}
                                <div class="col-md-8"><h3>Food Item : {{food.fname}}</h3>
                                <h4>Food Price : Rs {{food.price}}</h4></div>
                                <div class="col-md-4">
                                  <h4>Quantity : {{order.quantity}}</h4>
                                  <h5>Total : Rs {{order.quantity|mul:food.price}}</h5>
                                </div>
                              {% endif %}
                            {% endfor %}
                          </div>
                        </div>
                      </div>
                    </div>
                    {% endif %}
                    {% endfor %}
                  </div>
                </div>
                <script>
                  function refreshOrders(){
                    const x = new XMLHttpRequest();
                    x.onreadystatechange = function(){
                      if(this.readyState == 4 && this.status == 200){
                        const orders = JSON.parse('orders');
                        console.log(orders);
                      }
                    }
                    x.open("{% url 'Get New Order' %}");
                  }
                </script>
                <div class="tab-content" id="myTabContent">
                  <div class="tab-pane fade " id="cstats-tab-pane" role="tabpanel" aria-labelledby="cstats-tab" tabindex="0">
                    <h1 class="text-dark d-none d-lg-block">All the customers with their total purchase will be shown here</h1>
                    <h1 class="text-dark fs-5 d-lg-none">All the customers with their total purchase will be shown here</h1>
                    <div class="table-responsive">
                    <table class="table table-striped table-hover" style="font-family:'Montserrat'; font-size:20px;">
                      <thead>
                        <tr class="table-dark"><td>Phone No.</td><td>Name</td><td>Total Purchase(&#8377;)</td></tr>
                      </thead>
                      <tbody>
                        {% for p, n, t in huser %}
                        <tr><td>{{p}}</td><td>{{n}}</td><td class="text-success">{{t}}</td></tr>
                        {% endfor %}
                      </tbody>
                    </table>
                  </div>
                  </div>
                </div>


              </div>
              <div class="tab-pane fade" id="v-pills-history" role="tabpanel" aria-labelledby="v-pills-history-tab" tabindex="0">
                <div class="table-responsive">
                <table class="table table-striped table-hover" style="font-family:'Montserrat'; font-size:20px;">
                  <thead>
                    <tr class="table-primary" style="font-weight:bold; font-size:25px;">
                      <td>
                        Phone
                      </td>
                      <td>
                        Name
                      </td>
                      <td>
                        Food Ordered
                      </td>
                      <td>
                        Price &#8377;
                      </td>
                      <td>
                        Date
                      </td>
                    </tr>
                  </thead>
                  <tbody>
                    {%for ph, n, fn, p, d in history %}

                    <tr>
                      <td>
                        {{ph}}
                      </td>
                      <td>
                        {{n}}
                      </td>
                      <td>
                        {{fn}}
                      </td>
                      <td class="text-success d-flex">
                        <span class="material-symbols-outlined">
                          currency_rupee
                          </span>
                        {{p}}
                      </td>
                      <td>
                        {{d}}
                      </td>
                    </tr>
                    {% endfor %}
                  </tbody>
                </table>
              </div>
                
              </div>
            </div>
          </div>



        <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
        <script>
        AOS.init();
        </script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ENjdO4Dr2bkBIFxQpeoTz1HIcje39Wm4jDKdf19U8gI4ddQ3GYNS7NTKfAdVQSZe" crossorigin="anonymous"></script>
    </body>
</html>